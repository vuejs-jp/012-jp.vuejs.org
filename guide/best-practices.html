
<!DOCTYPE html>
<html lang="en">
    <head><meta name="generator" content="Hexo 3.9.0">
        <title>コツ & ベストプラクティス - vue.js</title>
        <meta charset="utf-8">
        <meta name="description" content="Vue.js - Intuitive, Fast and Composable MVVM for building interactive interfaces.">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600|Source+Code+Pro|Dosis:300,500" rel="stylesheet" type="text/css">
        <link rel="icon" href="/images/logo.png" type="image/x-icon">
        <script>
            window.PAGE_TYPE = "guide"
        </script>
        <link rel="stylesheet" href="/css/page.css">
        <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46852172-1', 'vuejs.org');
  ga('send', 'pageview');
</script>
        <script src="/js/vue.js"></script>
    </head>
    <body>
        <div id="mobile-bar">
            <a class="menu-button"></a>
            <a class="logo" href="/"></a>
        </div>
        
            <div id="header">
    <a id="logo" href="/">
        <img src="/images/logo.png">
        <span>Vue.js</span>
    </a>
    <ul id="nav">
        <li>
  <form id="search-form">
    <input type="text" id="search-query" class="st-default-search-input">
  </form>
</li>
<li><a href="/guide/" class="nav-link current">ガイド</a></li>
<li><a href="/api/" class="nav-link">API リファレンス</a></li>
<li><a href="/examples/" class="nav-link">例</a></li>
<li><a href="/blog/" class="nav-link">ブログ(英語)</a></li>
<li><a href="https://github.com/vuejs/vue" target="_blank" class="nav-link">GitHub</a></li>

    </ul>
</div>
            <div id="main">
                
                    
    <div class="sidebar">
    <ul class="main-menu">
        <li>
  <form id="search-form">
    <input type="text" id="search-query" class="st-default-search-input">
  </form>
</li>
<li><a href="/guide/" class="nav-link current">ガイド</a></li>
<li><a href="/api/" class="nav-link">API リファレンス</a></li>
<li><a href="/examples/" class="nav-link">例</a></li>
<li><a href="/blog/" class="nav-link">ブログ(英語)</a></li>
<li><a href="https://github.com/vuejs/vue" target="_blank" class="nav-link">GitHub</a></li>

    </ul>
    <div class="list">
        
        <h2>ガイド</h2>
        
        <ul class="menu-root">
            
                <li>
                    <a href="/guide/installation.html" class="sidebar-link">インストール</a>
                </li>
            
                <li>
                    <a href="/guide/index.html" class="sidebar-link">はじめに</a>
                </li>
            
                <li>
                    <a href="/guide/directives.html" class="sidebar-link">ディレクティブ</a>
                </li>
            
                <li>
                    <a href="/guide/filters.html" class="sidebar-link">フィルタ</a>
                </li>
            
                <li>
                    <a href="/guide/list.html" class="sidebar-link">リスト表示</a>
                </li>
            
                <li>
                    <a href="/guide/events.html" class="sidebar-link">イベントのリスニング</a>
                </li>
            
                <li>
                    <a href="/guide/forms.html" class="sidebar-link">フォームのハンドリング</a>
                </li>
            
                <li>
                    <a href="/guide/computed.html" class="sidebar-link">Computed Properties</a>
                </li>
            
                <li>
                    <a href="/guide/custom-directive.html" class="sidebar-link">カスタムディレクティブ</a>
                </li>
            
                <li>
                    <a href="/guide/custom-filter.html" class="sidebar-link">カスタムフィルタ</a>
                </li>
            
                <li>
                    <a href="/guide/components.html" class="sidebar-link">コンポーネントシステム</a>
                </li>
            
                <li>
                    <a href="/guide/transitions.html" class="sidebar-link">トランジションシステム</a>
                </li>
            
                <li>
                    <a href="/guide/application.html" class="sidebar-link">大規模アプリケーションの構築</a>
                </li>
            
                <li>
                    <a href="/guide/extending.html" class="sidebar-link">Vue の拡張</a>
                </li>
            
                <li>
                    <a href="/guide/best-practices.html" class="sidebar-link current new">コツ & ベストプラクティス</a>
                </li>
            
                <li>
                    <a href="/guide/faq.html" class="sidebar-link">FAQ</a>
                </li>
            
            <li><a href="http://011.vuejs.org">0.11 のドキュメントをお探しですか？</a></li>
            <li style="margin:10px 0 3px">
              <script data-gittip-username="yyx990803" data-gittip-widget="button" src="//gttp.co/v1.js"></script>
            </li>
        </ul>
    </div>
</div>


<div class="content guide with-sidebar">
    <h1>コツ & ベストプラクティス</h1>
    <div id="ad">
        <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=vuejs" id="_carbonads_js"></script>
    </div>
    <h2 id="データの初期化"><a href="#データの初期化" class="headerlink" title="データの初期化"></a>データの初期化</h2><p>Vue のデータ監視モデルは決定論的なデータモデルを好みます。それは <code>data</code> オプションで率直にリアクティブにする必要があるすべてのデータプロパティを初期化することをお勧めします。例えば、次のテンプレートが与えられると:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"demo"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-class</span>=<span class="string">"green: validation.valid"</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">"message"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>それは空オブジェクトの代わりに、データをこのように初期化することをお勧めします:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#demo'</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    message: <span class="string">''</span>,</span><br><span class="line">    validation: &#123;</span><br><span class="line">      valid: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>その理由は、 Vue は再帰的にデータオブジェクトを歩き見まわることによってデータ変更を監視していることと、<code>Object.defineProperty</code> を使用して既存のプロパティをリアクティブな getter と setter に変換するからです。インスタンスが作成される時にプロパティが存在しない場合、 Vue はそれを追跡することができません。</p>
<p>しかし、データ内のすべての単一のネストされたプロパティを設定する必要はありません。空オブジェクトとしてフィールドを初期化することは OK で、そして、それ以降のネストされた構造を持つ新しいオブジェクトに設定し、Vue はこの新しいオブジェクトのネストされたプロパティを歩き、それらを監視することができるようになるためだからです。</p>
<h2 id="プロパティの追加と削除"><a href="#プロパティの追加と削除" class="headerlink" title="プロパティの追加と削除"></a>プロパティの追加と削除</h2><p>上述したように、Vue は <code>Object.defineProperty</code> でプロパティを変換してデータを監視します。しかしながら、ECMAScript 5 では、新しいプロパティがオブジェクトに追加された時、またはオブジェクトからプロパティが削除された時、それらを検出する方法はありません。この制約に対処するために、オブジェクトは3つのメソッドが拡張されて監視されます:</p>
<ul>
<li><code>obj.$add(key, value)</code></li>
<li><code>obj.$set(key, value)</code></li>
<li><code>obj.$delete(key)</code></li>
</ul>
<p>これらのメソッドは、望まれた DOM 更新をトリガしながら、監視されたオブジェクトからプロパティを追加/削除するために使用できます。<code>$add</code> と <code>$set</code> の差異は、<code>$add</code> はもしキーが既にオブジェクトに存在する場合は早期に返すので、そういうわけでまさに <code>obj.$add(key)</code> を呼び出すことは <code>undefined</code> で既にある値を上書きしません。</p>
<p>関連注意事項は、インデックス(例えば <code>arr[1] = value</code>)を設定することによって、直接バウンドされたデータ配列を変更しますが、Vue は変更をピックアップできません。また、これらの変更について Vue.js に通知するために 拡張メソッドを使用できます。監視された配列は2つのメソッドで拡張されています:</p>
<ul>
<li><code>arr.$set(index, value)</code></li>
<li><code>arr.$remove(index | value)</code></li>
</ul>
<p>Vue のコンポーネントインスタンスもインスタンスメソッドで対応します:</p>
<ul>
<li><code>vm.$get(path)</code></li>
<li><code>vm.$set(path, value)</code></li>
<li><code>vm.$add(key, value)</code></li>
<li><code>vm.$delete(key, value)</code></li>
</ul>
<p><code>vm.$get</code> と <code>vm.$set</code> 両方は path を受け入れることに注意してください。</p>
<p class="tip">これらのメソッドの存在にも関わらず、必ず必要な時に監視されたフィールドを追加するだけにしてください。あなたのコンポーネント状態のために <code>data</code> オプションをスキーマとしてみなすと便利です。明示的にコンポーネント定義にありうる現行のプロパティをリストにすることは、後でそれを見た時にコンポーネントが含まれていてもよいか理解し易いです。</p>

<h2 id="非同期更新の理解"><a href="#非同期更新の理解" class="headerlink" title="非同期更新の理解"></a>非同期更新の理解</h2><p>Vue はデフォルトで非同期的に view の更新を行うことを知っておくことは重要です。データ変更が監視されるたびに、Vue はキューをオープンし同じイベントループで生じた全てのデータ変更をバッファします。もし同じウォッチャが複数回起動される場合、それは一度だけキューに押し込まれます。内部的には、Vue はもし非同期キューイング向けに <code>MutationObserver</code> が利用可能ならそれを使い、そうでなければ <code>setTimeout(fn, 0)</code> にフォールバックします。</p>
<p>例として、<code>vm.someData = &#39;new value&#39;</code> をセットした時、DOM はすぐには更新しません。 キューがフラッシュされた時、次の “tick” で更新します。 この振舞いは、更新した DOM の状態に依存する何かをしたい時、注意が必要です。Vue.js は一般的に”データ駆動”的な方法で考えることを開発者に奨励していますが、時々、いつも使用してきた便利な jQuery プラグインをまさに使用したい時は、DOM を直接触れないようにしてください。Vue.js でデータの変更後に、DOM の更新が完了するまでに待つためには、データが変更された直後に <code>Vue.nextTick(callback)</code> を使用することができます。コールバックが呼ばれた時、DOM は更新されているでしょう。例えば:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"example"</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#example'</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    msg: <span class="string">'123'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">vm.msg = <span class="string">'new message'</span> <span class="comment">// 変更データ</span></span><br><span class="line">vm.$el.textContent === <span class="string">'new message'</span> <span class="comment">// false</span></span><br><span class="line">Vue.nextTick(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  vm.$el.textContent === <span class="string">'new message'</span> <span class="comment">// true</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>特に便利な内部コンポーネントのインスタンスメソッド <code>vm.$nextTick()</code> もあります。なぜなら、それはグローバルな <code>Vue</code> とそのコールバックの <code>this</code> コンテキストは自動的に現在の Vue インスタンスにバウンドされるからです:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">'example'</span>, &#123;</span><br><span class="line">  template: <span class="string">'&lt;span&gt;&#123;&#123;msg&#125;&#125;&lt;/span&gt;'</span>,</span><br><span class="line">  data: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      msg: <span class="string">'not updated'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    updateMessage: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.msg = <span class="string">'updated'</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.$el.textContent) <span class="comment">// =&gt; '更新されない'</span></span><br><span class="line">      <span class="keyword">this</span>.$nextTick(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.$el.textContent) <span class="comment">// =&gt; '更新される'</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="コンポーネントのスコープ"><a href="#コンポーネントのスコープ" class="headerlink" title="コンポーネントのスコープ"></a>コンポーネントのスコープ</h2><p>全ての Vue.js コンポーネントはそれ独自のスコープを持つ個々の Vue インスタンスです。それはコンポーネントを使用する時にスコープがどのように機能するか理解することが大事です。大雑把には:</p>
<blockquote>
<p>もし何かが親テンプレートに表示されている場合は、それは親スコープでコンパイルされます。もし子テンプレートに表示されている場合は、それは子スコープでコンパイルされます。</p>
</blockquote>
<p>よくある間違いは、親テンプレート内の子プロパティ/メソッドにディレクティブをバインドしようとします:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"demo"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 動作しない --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">child-component</span> <span class="attr">v-on</span>=<span class="string">"click: childMethod"</span>&gt;</span><span class="tag">&lt;/<span class="name">child-component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>もし root ノードのコンポーネント上で子スコープのディレクティブをバインドする必要がある場合は、子コンポーネント自身のテンプレートにすべきです:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">'child-component'</span>, &#123;</span><br><span class="line">  <span class="comment">// 正しいスコープなため、これは動作する</span></span><br><span class="line">  template: <span class="string">'&lt;div v-on="click: childMethod"&gt;Child&lt;/div&gt;'</span>,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    childMethod: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'child method invoked!'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><code>v-repeat</code> を持ったコンポーネントを使用している時、このパターンは <code>$index</code> にも適用されることに注意してください。</p>
<p>同様に、コンポーネントコンテナ内部の HTML コンテンツは、”transclusion content” と見なされます。子テンプレートは、少なくとも1つの <code>&lt;content&gt;&lt;/content&gt;</code> アウトレットを含んでいない限り、それらはどこにも挿入されません。挿入されたコンテンツは、親スコープでコンパイルされています:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">child-component</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 親スコープでコンパイル --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">child-component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>子テンプレートとして子スコープでコンテンツをコンパイルしたいことを示すために、<code>inline-template</code> 属性を使用しています:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">child-component</span> <span class="attr">inline-template</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 子スコープでコンパイル--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">child-component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>詳細は<a href="/guide/components.html#コンテンツ挿入">コンテンツ挿入</a> を参照してください。</p>
<h2 id="インスタンス間の通信"><a href="#インスタンス間の通信" class="headerlink" title="インスタンス間の通信"></a>インスタンス間の通信</h2><p>Vue で親子間の通信の一般的なパターンは、<code>props</code> を使用して、子にコールバックとして親メソッドを渡しています。これは JavaScript 実装詳細を分離するのを維持しながら、(構成が起こる)テンプレート内部の未定義な通信を許可します:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"demo"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Child says: &#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">child-component</span> <span class="attr">send-message</span>=<span class="string">"&#123;&#123;onChildMsg&#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">child-component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#demo'</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    msg: <span class="string">''</span></span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    onChildMsg: <span class="function"><span class="keyword">function</span>(<span class="params">msg</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.msg = msg</span><br><span class="line">      <span class="keyword">return</span> <span class="string">'Got it!'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    <span class="string">'child-component'</span>: &#123;</span><br><span class="line">      props: [</span><br><span class="line">        <span class="comment">// コールバック prop が実際に関数であることを</span></span><br><span class="line">        <span class="comment">// 確認するために prop 検証を使用できる</span></span><br><span class="line">        &#123;</span><br><span class="line">          name: <span class="string">'send-message'</span>,</span><br><span class="line">          type: <span class="built_in">Function</span>,</span><br><span class="line">          required: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="comment">// props は自動で camelized されるハイフンを持っている</span></span><br><span class="line">      template:</span><br><span class="line">        <span class="string">'&lt;button v-on="click:onClick"&gt;Say Yeah!&lt;/button&gt;'</span> +</span><br><span class="line">        <span class="string">'&lt;p&gt;Parent responds: &#123;&#123;response&#125;&#125;&lt;/p&gt;'</span>,</span><br><span class="line">      <span class="comment">// コンポーネント `data` オプションは関数を必要する</span></span><br><span class="line">      data: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          response: <span class="string">''</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      methods: &#123;</span><br><span class="line">        onClick: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">          <span class="keyword">this</span>.response = <span class="keyword">this</span>.sendMessage(<span class="string">'Yeah!'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>結果:</strong></p>
<div id="demo"><p>Child says: {&#123;msg&#125;}</p><child-component send-message="{&#123;onChildMsg&#125;}"></child-component></div>

<script>
new Vue({
  el: '#demo',
  data: {
    msg: ''
  },
  methods: {
    onChildMsg: function(msg) {
      this.msg = msg
      return 'Got it!'
    }
  },
  components: {
    'child-component': {
      props: [
        {
          name: 'send-message',
          type: Function,
          required: true
        }
      ],
      data: function () {
        return {
          fromParent: ''
        }
      },
      template:
        '<button v-on="click:onClick">Say Yeah!</button>' +
        '<p>Parent responds: <span v-text="fromParent"></span></p>',
      methods: {
        onClick: function () {
          this.fromParent = this.sendMessage('Yeah!')
        }
      }
    }
  }
})
</script>

<p>複数のネストされたコンポーネント間で通信する必要がある時、<a href="/api/instance-methods.html#イベント">イベント</a>を使用できます。それに加えてまた、Vue で大規模なアプリケーションを要検討するために、<a href="https://facebook.github.io/flux/docs/overview.html" target="_blank" rel="noopener">Flux</a> のようなアーキテクチャを実装することがかなり実現可能です。</p>
<h2 id="フラグメントインスタンス"><a href="#フラグメントインスタンス" class="headerlink" title="フラグメントインスタンス"></a>フラグメントインスタンス</h2><p>0.12.2 から、<code>replace</code> オプションはデフォルトは <code>true</code> になります。これは基本的に以下を意味します:</p>
<blockquote>
<p>テンプレートに入れたものは何でも、DOM でレンダリングされて終わります。</p>
</blockquote>
<p>なので、もしあなたのテンプレートが 1 トップレベル要素以上含む場合:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">'example'</span>, &#123;</span><br><span class="line">  template:</span><br><span class="line">    <span class="string">'&lt;div&gt;A&lt;/div&gt;'</span> +</span><br><span class="line">    <span class="string">'&lt;div&gt;B&lt;/div&gt;'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>または、もしテンプレートがテキストだけ含む場合:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">'example'</span>, &#123;</span><br><span class="line">  template: <span class="string">'Hello world'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>両方のケースでは、インスタンスは root 要素を持たない<strong>フラグメントインスタンス</strong>になります。フラグメントインスタンス <code>$el</code> は “アンカーノード”にポイントにし、空のテキストノード(またはデバッグモードではコンポーネントノード)になります。恐らく最も重要なものが、ディレクティブで、コンポーネント要素上のトランジションそして属性(props を除く)は、どんなエフェクトも提供しません。なぜなら、バインドするために root 要素がないからです:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- root 要素がないため動作しません --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">example</span> <span class="attr">v-show</span>=<span class="string">"ok"</span> <span class="attr">v-transition</span>=<span class="string">"fade"</span>&gt;</span><span class="tag">&lt;/<span class="name">example</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- prop は意図したように動作をします --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">example</span> <span class="attr">prop</span>=<span class="string">"&#123;&#123;someData&#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">example</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>もちろん、フラグメントインスタンスに対する有効なユースケースは、一般的に単一の root 要素にあなたのコンポーネントを与えることが良いアイディアではありません。確実にコンポーネント要素のディレクティブと属性に確実に転送され、そして若干良いパフォーマンス結果にもなります。</p>
<h2 id="デフォルトオプションの変更"><a href="#デフォルトオプションの変更" class="headerlink" title="デフォルトオプションの変更"></a>デフォルトオプションの変更</h2><p>グローバルな <code>Vue.options</code> オブジェクトに設定することにより、オプションのデフォルト値を変更することが可能です。例えば、Vue インスタンスの<code>replace: false</code> の振舞いを与えるために <code>Vue.options.replace = false</code> を設定できます。この機能は慎重に使ってください。これは全てのインスタンスの動作に影響を与えるため、新しいプロジェクトを開始している場合にのみ、使用してください。</p>
<p>次: <a href="/guide/faq.html">FAQ</a></p>

    <div class="footer">間違いを見つけた、またはドキュメントに貢献したいですか？<a href="https://github.com/vuejs-jp/012-jp.vuejs.org" target="_blank">Github からこのサイトを Fork しましょう</a>！</div>
</div>

                
            </div>
            <script src="/js/smooth-scroll.min.js"></script>
            <script src="/js/common.js"></script>
        

        <script src="https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
        <script src="https://cdn.jsdelivr.net/gh/tnir/vuejs-012-jp-outdated-docs-modal@012-jp-v2.1.0/prompt.min.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                FastClick.attach(document.body);
            }, false);
        </script>
    </body>
</html>
